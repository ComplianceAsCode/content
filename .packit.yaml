downstream_package_name: scap-security-guide
upstream_package_name: scap-security-guide
specfile_path: scap-security-guide.spec

actions:
  get-current-version:
  - bash utils/version.sh

srpm_build_deps:
  - bash

jobs:
- &build
  job: copr_build
  trigger: pull_request
  targets:
  - fedora-all-x86_64

- <<: *build
  trigger: commit
  branch: "gh-readonly-queue/.*"

# when modifying this, modify also tests/tmt-plans/
- &fedora-tests
  job: tests
  trigger: pull_request
  fmf_path: tests/tmt
  identifier: /rpmbuild-ctest-fedora
  tmt_plan: /plans/contest/rpmbuild-ctest-fedora$
  targets:
    fedora-all: {}

- <<: *fedora-tests
  identifier: fedora-cis
  tmt_plan: /plans/fedora-cis$
